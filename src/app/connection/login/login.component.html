<div class="login ">
  <div class="col-md-8 col-lg-6 mx-auto">
    <h3 class="text-center text-color py-5">Je me connecte...</h3>
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="form-row my-3">
        <div class="form-group col mx-4">
          <input type="text" formControlName="pseudo" class="form-control d-inline" placeholder="* Pseudonyme"
            maxlength=30 autofocus/>
          <div *ngIf="(formControls.pseudo.touched || formControls.pseudo.dirty) && formControls.pseudo.invalid">
            <div class="alert alert-danger my-1 p-1" *ngIf="formControls.pseudo.errors.required">Saisissez votre pseudo.
            </div>
          </div>
        </div>
      </div>

      <div class="form-row my-3">
        <div class="form-group col mx-4">
          <input type="password" formControlName="password" class="form-control" placeholder="* Password"
            maxlength=30 />
          <div *ngIf="(formControls.password.touched || formControls.password.dirty) && formControls.password.invalid">
            <div class="alert alert-danger my-1 p-1" *ngIf="formControls.password.errors.required">Saisissez votre mot
              de passe.
            </div>
          </div>

        </div>
      </div>
      <div *ngIf="!loading">
        <div class="text-center col mt-3 ">
          <button class="btn btn-primary col col-md-6" type="submit" [disabled]="loginForm.invalid">J'envoie</button>

          <div *ngIf="badCredentials">
            <div class="alert alert-danger mt-1 p-1">Oups, le pseudo ou le mot passe n'est pas correct.</div>
          </div>
          <div *ngIf="technicalFailure">
            <div class="alert alert-danger mt-1 p-1">Oups, il y a une saucisse dans la pâte à choux. Veuillez réessayer plus tard.</div>
          </div>
          <div *ngIf="passwordExpired">
            <div class="alert alert-danger mt-1 p-1">Oups, votre mot de passe provisoire a expiré. Refaites une demande pour mot de passe perdu</div>
          </div>
        </div>

        <div class="text-center col mt-4">
          <button class="btn btn-secondary col col-md-6" [routerLink]="'/connection/register'">Je n'ai pas de compte</button>
        </div>

        <div class="text-center col mt-4">
          <button class="btn btn-info col col-md-6" [routerLink]="'/connection/password'">J'ai perdu mon mot de passe</button>
        </div>
      </div>

      <div *ngIf="loading" class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
        </div>
      </div>

    </form>

    <ng-template #error>
      <div class="modal-header bg-danger">
        <h5 class="modal-title pull-left text-white">Oups, une saucisse dans la pâte!</h5>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeModal()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Nous sommes désolés, un incident est intervenu. Merci de réessayer plus tard.
      </div>
    </ng-template>
  </div>
</div>
